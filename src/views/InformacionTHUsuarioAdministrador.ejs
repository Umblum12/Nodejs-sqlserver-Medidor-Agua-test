<%- include('./partials/header.ejs') %>

<%- include('./partials/navigationUsuarioAdministrador.ejs') %>

    <title>Consumo de agua</title>
</head>
<body>
      <div class="container form-condimodeagua">
        <div class="row">
            <h1>Tarifas</h1>
            <p id="TarifaDU">Domesticas Urbanas</p>
            <div class="card col-md-3 mx-auto my-5 table-responsive" style="width: 40rem;">
            <table class="table table-sm table-primary table-hover table-bordered ">
                <caption>Lista de tarifas</caption>
                <thead class="table-info">
                  <tr>
                        <th scope="col">Tipo de Tarifa </th>
                        <th scope="col">Rango </th>
                        <th scope="col">Precio </th>     
                        <th scope="col">Alcantarillado </th>  
                        <th scope="col">Saneamiento </th>
                        <th scope="col">ACCIONES</th>     
                  </tr>
                </thead>
                <tbody>
                    <% if( i=0, Tarifas.recordset.length) {  %>
                        <tr>  
                            <td ><%= Tarifas.recordset[i].tipotarifas %></td>  
                            <td ><%= Tarifas.recordset[i].Rango %></td>
                            <td ><%= Tarifas.recordset[i].Precio %></td>
                            <td ><%= Tarifas.recordset[i].Alcantarillado %></td>
                            <td ><%= Tarifas.recordset[i].Saneamiento %></td>
                            <td id="UsuariosregAcciones">
                            <a class="btn_Acciones_Edit" href="/Editar" class="btn btn-outline-info">EDITAR<i class='bx bxs-edit'></i></a>
                            <a class="btn_Acciones_Delete" href="/InformacionTHUsuarioAdministrador/<%= Tarifas.recordset[i].ID %>" class="btn btn-outline-danger">ELIMINAR<i class='bx bxs-trash-alt'></i></a>
                            <a class="btn_Acciones_Save" href="" class="btn btn-outline-danger">GUARDAR<i class='bx bxs-trash-alt'></i></a>                   
                            </td>
                        </tr>   
                    <% } %>
                </tbody>
              </table>
            </div>
            <p id="TarifaCU">Comerciales Urbanas</p>
            <div class="card col-md-3 mx-auto my-5 table-responsive" style="width: 40rem;">
            <table class="table table-sm table-primary table-hover table-bordered ">
                <caption>Lista de tarifas</caption>
                <thead class="table-info">
                  <tr>
                        <th scope="col">Tipo de Tarifa </th>
                        <th scope="col">Rango </th>
                        <th scope="col">Precio </th>     
                        <th scope="col">Alcantarillado </th>  
                        <th scope="col">Saneamiento </th>
                        <th scope="col">ACCIONES</th>     
                  </tr>
                </thead>
                <tbody>
                    <% if( i=1, Tarifas.recordset.length) {  %>
                        <tr>  
                            <td ><%= Tarifas.recordset[i].tipotarifas %></td>  
                            <td ><%= Tarifas.recordset[i].Rango %></td>
                            <td ><%= Tarifas.recordset[i].Precio %></td>
                            <td ><%= Tarifas.recordset[i].Alcantarillado %></td>
                            <td ><%= Tarifas.recordset[i].Saneamiento %></td>
                            <td id="UsuariosregAcciones">
                            <a class="btn_Acciones_Edit" href="/Editar" class="btn btn-outline-info">EDITAR<i class='bx bxs-edit'></i></a>
                            <a class="btn_Acciones_Delete" href="/InformacionTHUsuarioAdministrador/<%= Tarifas.recordset[i].ID %>" class="btn btn-outline-danger">ELIMINAR<i class='bx bxs-trash-alt'></i></a>
                            <a class="btn_Acciones_Save" href="" class="btn btn-outline-danger">GUARDAR<i class='bx bxs-trash-alt'></i></a>                   
                            </td>
                        </tr>   
                    <% } %>
                </tbody>
              </table>
            </div>

        </div>
     </div>
    <br id="Historial">
    <div class="container form-condimodeagua">
        <h3>Historial</h3>
        <div class="row">
            <div class="card col-md-3 mx-auto my-5 table-responsive" style="width: 40rem;">
                <table class="table table-sm table-primary table-hover table-bordered ">
                  <caption>Lista de Historial</caption>
                    <thead class="table-info">
                      <tr>
                        <th scope="col">Fecha</th>
                        <th scope="col">Estado</th>
                        <th scope="col">ACCIONES</th>       
                      </tr>
                    </thead>
                    <tbody>
                        <% for(i=0; i < Historial.recordset.length; i++) { %>
                            <tr>  
                                <td ><%= Historial.recordset[i].fecha %></td>  
                                <td ><%= Historial.recordset[i].estado %></td>
                                <td id="UsuariosregAcciones">
                                <a class="btn_Acciones_Edit" href="/Editar" class="btn btn-outline-info">EDITAR<i class='bx bxs-edit'></i></a>
                                <a class="btn_Acciones_Delete" onclick="confirm(<%= Historial.recordset[i].ID %>);" >ELIMINAR<i ></i></a>
                                <a class="btn_Acciones_Save" href="" class="btn btn-outline-danger">GUARDAR<i class='bx bxs-trash-alt'></i></a>                   
                                </td>
                            </tr>   
                        <% } %>
                    </tbody>
                  </table>
                </div>
        </div>
    </div>
  </div>   
    <br>
    <br>
    <br>
    <br>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.24/dist/sweetalert2.all.min.js"></script>
  
    
    <script>
                $(document).ready(function () {
            $('#Usuarios').DataTable();
        });
      function confirm(ID) {
        const swalWithBootstrapButtons = Swal.mixin({
            })
            event.preventDefault();
            swalWithBootstrapButtons.fire({
            title: '¿Está seguro de eliminar el registro?',
            text: "¡Esta acción no se puede revertir!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: '¡Si, eliminar!',
            cancelButtonText: '¡No, cancelar!',
            background: '#fff url(/assets/imagenes/background.jpg)',
            backdrop: `
              rgba(0,0,123,0.4)
            `,
            timer: 5000,
            timerProgressBar: true,
          }).then((result) => {
            if (result.isConfirmed) {
              Swal.fire(
                '¡Eliminado!',
                'Su registro ha sido eliminado.',
                'success'
              )
              window.location ='/Configuracion/Eliminar/'+ID;
            } else if (
              /* Read more about handling dismissals below */
              result.dismiss === Swal.DismissReason.cancel
            ) {
              swalWithBootstrapButtons.fire(
                'Cancelado',
                'Tu registro está a salvo :)',
                'error'
              )
            }
          })
      }
    </script>

        <%- include('./partials/footer.ejs') %>